<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Simulasi Keyboard V23 - Edukasi Input Output</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@700&display=swap" rel="stylesheet">
<style>
  /* === 1. GLOBAL === */
  body {
    margin: 0; min-height: 100vh;
    display: flex; justify-content: center; align-items: center;
    background: #cbd5e1; font-family: 'Inter', sans-serif;
    user-select: none; overflow: hidden;
  }

  .container {
    background: #f8fafc; padding: 40px; 
    border-radius: 24px; box-shadow: 0 50px 100px rgba(0,0,0,0.15);
    display: flex; flex-direction: column; align-items: center;
    width: 750px; position: relative;
    transform: scale(0.9); 
  }

  @media (max-width: 800px) {
    .container { transform: scale(0.45); margin-top: -80px; }
    body { align-items: flex-start; padding-top: 50px; overflow: auto; }
  }

  /* === 2. MONITOR MODERN === */
  .monitor-assembly {
    display: flex; flex-direction: column; align-items: center;
    margin-bottom: 0px; width: 100%; z-index: 10;
  }
  .monitor-frame {
    width: 500px; height: 290px;
    background: #0f0f0f; border-radius: 12px; padding: 8px;
    box-shadow: 0 0 0 1px #000, 0 30px 70px rgba(0,0,0,0.5);
    display: flex; flex-direction: column; position: relative; z-index: 2;
  }
  .screen {
    flex: 1; position: relative; overflow: hidden; border-radius: 6px;
    background: #000;
  }
  
  /* BOOT SCREEN */
  .boot-screen {
    position: absolute; inset: 0; background: #000; z-index: 50;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    opacity: 0; pointer-events: none; transition: opacity 0.5s;
  }
  .boot-screen.active { opacity: 1; }
  .win-logo {
    width: 50px; height: 50px; background: linear-gradient(135deg, #00adef, #2b6de3); 
    clip-path: polygon(0 0, 45% 0, 45% 45%, 0 45%, 0 0, 55% 0, 100% 0, 100% 45%, 55% 45%, 55% 0, 0 55%, 45% 55%, 45% 100%, 0 100%, 0 55%, 55% 55%, 100% 55%, 100% 100%, 55% 100%, 55% 55%);
    box-shadow: 0 0 30px rgba(0, 173, 239, 0.4); margin-bottom: 20px;
  }
  .spinner {
    width: 25px; height: 25px; border: 3px solid rgba(255,255,255,0.1);
    border-top-color: #00adef; border-radius: 50%; animation: spin 1s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* WALLPAPER MODERN */
  .wallpaper {
    width: 100%; height: 100%;
    /* Abstract Modern Gradient Wallpaper */
    background: url('https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=1000&auto=format&fit=crop'); 
    background-size: cover; background-position: center;
    opacity: 0; transition: opacity 1.5s ease;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
  }
  .wallpaper.on { opacity: 1; }

  /* WINDOW MODERN (GLASSMORPHISM) */
  .glass-window {
    width: 400px; height: 200px;
    background: rgba(20, 20, 30, 0.65); 
    backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 20px 40px rgba(0,0,0,0.4);
    display: flex; flex-direction: column;
    opacity: 0; transform: translateY(20px) scale(0.95); 
    transition: 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
  }
  .wallpaper.on .glass-window { opacity: 1; transform: translateY(0) scale(1); }

  .window-header {
    height: 32px; display: flex; align-items: center; padding: 0 15px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    justify-content: space-between;
  }
  .dots { display: flex; gap: 6px; }
  .dot { width: 10px; height: 10px; border-radius: 50%; }
  .red { background: #ff5f56; } .yellow { background: #ffbd2e; } .green { background: #27c93f; }
  .title { color: rgba(255,255,255,0.5); font-size: 11px; font-weight: 500; }

  .editor-content {
    flex: 1; padding: 20px;
    font-family: 'JetBrains Mono', monospace; 
    font-size: 14px; color: #e2e8f0; line-height: 1.5;
    text-align: left; white-space: pre-wrap; word-break: break-word; overflow-y: auto;
    text-shadow: 0 0 10px rgba(255,255,255,0.1);
  }
  
  .editor-content::-webkit-scrollbar { width: 6px; }
  .editor-content::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }

  .cursor-blink {
    display: inline-block; width: 2px; height: 16px; background: #38bdf8;
    box-shadow: 0 0 8px #38bdf8;
    animation: blink 1s infinite; vertical-align: middle; margin-left: 2px;
  }
  @keyframes blink { 50% { opacity: 0; } }

  /* DOCK BAR */
  .dock {
    height: 40px; margin-top: 15px;
    background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);
    border-radius: 20px; padding: 0 15px; border: 1px solid rgba(255,255,255,0.1);
    display: flex; align-items: center; gap: 15px;
    opacity: 0; transform: translateY(20px); transition: 1s 0.5s;
  }
  .wallpaper.on .dock { opacity: 1; transform: translateY(0); }
  .dock-icon { width: 24px; height: 24px; border-radius: 6px; background: rgba(255,255,255,0.2); transition: 0.2s; }
  .dock-icon:hover { transform: scale(1.2) translateY(-5px); background: #38bdf8; }

  /* CHIN & TOMBOL POWER BERNYALA */
  .chin {
    height: 35px; background: #0f0f0f; display: flex; align-items: center; justify-content: space-between;
    position: relative; padding: 0 20px; border-radius: 0 0 8px 8px;
  }
  .brand { color: #444; font-size: 10px; font-weight: 800; letter-spacing: 2px; position: absolute; left: 50%; transform: translateX(-50%); }
  .led { width: 4px; height: 4px; background: #333; border-radius: 50%; margin-right: 10px; transition: 0.3s; }
  .led.on { background: #fff; box-shadow: 0 0 10px #fff; }
  
  /* TOMBOL POWER SPESIAL */
  .pwr {
    width: 24px; height: 24px; background: transparent; 
    border-radius: 50%; border: 1px solid rgba(248, 113, 113, 0.3); /* Border merah tipis */
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    color: #f87171; /* Warna ikon merah */
    font-size: 12px; transition: 0.3s;
    outline: none;
    
    /* ANIMASI BERDENYUT (PULSE) AGAR SISWA SADAR */
    animation: pulse-attention 2s infinite ease-in-out;
  }

  /* Animasi Denyut Merah */
  @keyframes pulse-attention {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(248, 113, 113, 0.4); text-shadow: 0 0 2px #f87171; }
    50% { transform: scale(1.15); box-shadow: 0 0 10px 2px rgba(248, 113, 113, 0.1); text-shadow: 0 0 10px #f87171; }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(248, 113, 113, 0); text-shadow: 0 0 2px #f87171; }
  }

  /* KONDISI SAAT KOMPUTER NYALA (Hijau Stabil) */
  .pwr.active {
    color: #4ade80; /* Ikon Hijau */
    border-color: #4ade80;
    animation: none; /* Stop animasi denyut */
    box-shadow: 0 0 10px rgba(74, 222, 128, 0.5), inset 0 0 5px rgba(74, 222, 128, 0.2);
    text-shadow: 0 0 5px #4ade80;
  }

  .stand { width: 80px; height: 50px; background: linear-gradient(180deg, #111, #1a1a1a); margin-top: -5px; z-index: 1; }
  .base { width: 160px; height: 8px; background: #1a1a1a; border-radius: 10px 10px 0 0; z-index: 1; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }

  /* === 3. KEYBOARD (75% Scale) === */
  .kb-case {
    background: linear-gradient(180deg, #18181b 0%, #09090b 100%);
    padding: 18px; border-radius: 12px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 8px 0 #050505;
    transform: perspective(900px) rotateX(25deg) scale(0.75); 
    transform-style: preserve-3d;
    margin-top: -20px; margin-bottom: 0px; 
    width: fit-content; border: 1px solid #222;
  }
  .kb-row { display: flex; gap: 6px; margin-bottom: 6px; justify-content: center; }
  .key {
    width: 40px; height: 40px;
    background: #1e1e24; border-radius: 6px;
    color: #666; font-family: 'Rajdhani', sans-serif; font-size: 12px; font-weight: 700;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer; position: relative;
    box-shadow: 0 4px 0 #050505, 0 6px 5px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05); 
    transform: translateY(0); transition: transform 0.05s, box-shadow 0.05s;
  }
  @keyframes rgbWave {
    0% { color: #ff0000; text-shadow: 0 0 10px #ff0000; border-bottom-color: #ff0000; }
    25% { color: #00ff00; text-shadow: 0 0 10px #00ff00; border-bottom-color: #00ff00; }
    50% { color: #0000ff; text-shadow: 0 0 10px #0000ff; border-bottom-color: #0000ff; }
    75% { color: #ff00ff; text-shadow: 0 0 10px #ff00ff; border-bottom-color: #ff00ff; }
    100% { color: #ff0000; text-shadow: 0 0 10px #ff0000; border-bottom-color: #ff0000; }
  }
  .kb-case.rgb-on .key { 
    animation: rgbWave 4s linear infinite; 
    animation-delay: calc(var(--d) * 0.1s);
  }
  .key:active, .key.pressed {
    transform: translateY(4px); 
    box-shadow: 0 0 0 #050505, inset 0 2px 5px rgba(0,0,0,0.5); 
    background: #e2e8f0 !important; color: #000 !important;
    text-shadow: 0 0 15px #fff !important; animation: none !important; 
  }
  .key.space { width: 240px; }
  .key.back { width: 70px; font-size: 10px; }
  .key.tab { width: 55px; font-size: 10px; align-items: flex-end; padding-bottom: 6px; }
  .key.caps { width: 65px; font-size: 10px; align-items: flex-start; padding-left: 8px; }
  .key.enter { width: 85px; }
  .key.shift { width: 95px; font-size: 10px; }

  /* === 4. CONTROLS === */
  .controls { display: flex; gap: 15px; margin-top: 10px; }
  .btn { 
    padding: 12px 35px; border-radius: 50px; border: none; 
    font-weight: 600; cursor: pointer; transition: 0.2s; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.1); font-family: 'Inter', sans-serif;
  }
  .btn:active { transform: scale(0.95); }
  .btn-play { background: #3b82f6; color: #fff; } .btn-play:hover { background: #2563eb; }
  .btn-stop { background: #ef4444; color: #fff; display: none; } .btn-stop:hover { background: #dc2626; }

  .info-text { margin-top: 20px; font-size: 13px; color: #64748b; text-align: center; }
  kbd { background: #fff; padding: 2px 6px; border-radius: 4px; font-family: monospace; border: 1px solid #cbd5e1; box-shadow: 0 2px 0 #cbd5e1; }
</style>
</head>
<body>

<div class="container">
  <div class="monitor-assembly">
    <div class="monitor-frame">
      <div class="screen">
        <div class="boot-screen" id="bootScreen">
          <div class="win-logo"></div>
          <div class="spinner"></div>
        </div>
        <div class="wallpaper" id="wallpaper">
          <div class="glass-window">
            <div class="window-header">
              <div class="dots">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
              </div>
              <div class="title">pelajaran_hari_ini.txt</div>
              <div style="width: 30px;"></div>
            </div>
            <div class="editor-content" id="textArea"></div>
          </div>
          <div class="dock">
             <div class="dock-icon" style="background:#fff;"></div>
             <div class="dock-icon" style="background:#38bdf8;"></div>
             <div class="dock-icon" style="background:#22c55e;"></div>
             <div class="dock-icon" style="background:#f472b6;"></div>
          </div>
        </div>
      </div>
      <div class="chin">
        <div class="power-group" style="display:flex; align-items:center;">
            <div class="led" id="led"></div>
        </div>
        <span class="brand">LOGOS</span>
        <!-- Tombol Power dengan efek baru -->
        <button class="pwr" id="pwrBtn" title="Tekan untuk Menyalakan" onclick="togglePower(this)">⏻</button>
      </div>
    </div>
    <div class="stand"></div>
    <div class="base"></div>
  </div>

  <div class="kb-case" id="keyboard">
    <div class="kb-row">
      <div class="key" data-key="1">1</div><div class="key" data-key="2">2</div><div class="key" data-key="3">3</div>
      <div class="key" data-key="4">4</div><div class="key" data-key="5">5</div><div class="key" data-key="6">6</div>
      <div class="key" data-key="7">7</div><div class="key" data-key="8">8</div><div class="key" data-key="9">9</div>
      <div class="key" data-key="0">0</div><div class="key back" data-key="backspace">BACK</div>
    </div>
    <div class="kb-row">
      <div class="key tab" data-key="tab">TAB</div>
      <div class="key" data-key="q">Q</div><div class="key" data-key="w">W</div><div class="key" data-key="e">E</div>
      <div class="key" data-key="r">R</div><div class="key" data-key="t">T</div><div class="key" data-key="y">Y</div>
      <div class="key" data-key="u">U</div><div class="key" data-key="i">I</div><div class="key" data-key="o">O</div>
      <div class="key" data-key="p">P</div>
    </div>
    <div class="kb-row">
      <div class="key caps" data-key="capslock">CAPS</div>
      <div class="key" data-key="a">A</div><div class="key" data-key="s">S</div><div class="key" data-key="d">D</div>
      <div class="key" data-key="f">F</div><div class="key" data-key="g">G</div><div class="key" data-key="h">H</div>
      <div class="key" data-key="j">J</div><div class="key" data-key="k">K</div><div class="key" data-key="l">L</div>
      <div class="key enter" data-key="enter">ENTER</div>
    </div>
    <div class="kb-row">
      <div class="key shift" data-key="shift">SHIFT</div>
      <div class="key" data-key="z">Z</div><div class="key" data-key="x">X</div><div class="key" data-key="c">C</div>
      <div class="key" data-key="v">V</div><div class="key" data-key="b">B</div><div class="key" data-key="n">N</div>
      <div class="key" data-key="m">M</div><div class="key" data-key=",">,</div><div class="key" data-key=".">.</div>
      <div class="key shift" data-key="shift">SHIFT</div>
    </div>
    <div class="kb-row">
      <div class="key space" data-key=" ">SPACE</div>
    </div>
  </div>

  <div class="controls">
    <button class="btn btn-play" id="btnPlay" onclick="startAuto()">▶ Simulasi Otomatis</button>
    <button class="btn btn-stop" id="btnStop" onclick="stopAuto()">⏹ Berhenti</button>
  </div>
  
  <div class="info-text">
    Klik <b>Tombol Power Berkedip</b> untuk menyalakan komputer!
  </div>
</div>

<script>
  // AUDIO
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  function playClack() {
    if(audioCtx.state === 'suspended') audioCtx.resume();
    const t = audioCtx.currentTime;
    const osc = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();
    osc.type = 'triangle';
    osc.frequency.setValueAtTime(150, t); osc.frequency.exponentialRampToValueAtTime(40, t + 0.08); 
    gainNode.gain.setValueAtTime(0.5, t); gainNode.gain.exponentialRampToValueAtTime(0.01, t + 0.08);
    osc.connect(gainNode); gainNode.connect(audioCtx.destination);
    osc.start(); osc.stop(t + 0.1); 
  }

  // VARIABLES
  const keys = document.querySelectorAll('.key');
  keys.forEach((k, i) => {
    const colPos = i % 12; 
    k.style.setProperty('--d', colPos + (Math.floor(i/12)));
  });

  let isPower = false;
  let isAuto = false;
  let bootTimer = null;
  let typeInterval = null;
  
  // TEKS BARU YANG LEBIH EDUKATIF UNTUK SISWA
  const demoText = "Halo Siswa! Ini adalah simulasi Input dan Output. Ketika kalian menekan tombol di keyboard (Input), sinyal dikirim ke CPU, diproses, lalu muncul sebagai huruf di layar monitor (Output). Teknologi itu menarik, kan?";
  let typeIndex = 0;

  const wall = document.getElementById('wallpaper');
  const bootScreen = document.getElementById('bootScreen');
  const led = document.getElementById('led');
  const kbFrame = document.getElementById('keyboard');
  const textArea = document.getElementById('textArea');
  const btnPlay = document.getElementById('btnPlay');
  const btnStop = document.getElementById('btnStop');
  const pwrBtn = document.getElementById('pwrBtn');

  // INPUT LOGIC
  function typeChar(keyVal) {
    const keyEl = document.querySelector(`.key[data-key="${keyVal}"]`);
    if(keyEl) {
        keyEl.classList.add('pressed');
        playClack(); 
        setTimeout(() => keyEl.classList.remove('pressed'), 100);
    }
    if(isPower && wall.classList.contains('on')) {
        let charToAdd = "";
        if(keyVal === 'backspace') textArea.textContent = textArea.textContent.slice(0, -1);
        else if(keyVal === ' ') charToAdd = " ";
        else if(keyVal === 'enter') charToAdd = "\n";
        else if(keyVal.length === 1) charToAdd = keyVal;
        
        textArea.textContent += charToAdd;
        textArea.scrollTop = textArea.scrollHeight;
    }
  }

  keys.forEach(k => k.addEventListener('mousedown', (e) => { e.preventDefault(); typeChar(k.getAttribute('data-key')); }));
  document.addEventListener('keydown', (e) => {
    if(e.key === ' ') e.preventDefault(); 
    typeChar(e.key.toLowerCase());
  });

  // POWER SYSTEM
  function togglePower(btn) { 
    if(btn) btn.blur(); // Lepas fokus
    
    // Toggle class active pada tombol power untuk ganti warna
    btn.classList.toggle('active');
    
    if(isPower) powerOff(); else powerOn(); 
  }

  function powerOn() {
    if(isPower) return;
    isPower = true;
    
    // Pastikan tombol power visualnya ON (Hijau)
    pwrBtn.classList.add('active');

    led.classList.add('on');
    bootScreen.classList.add('active');
    kbFrame.classList.add('rgb-on'); 
    
    clearTimeout(bootTimer);
    bootTimer = setTimeout(() => {
      if(!isPower) return;
      bootScreen.classList.remove('active');
      wall.classList.add('on');
      textArea.innerHTML = '<span class="cursor-blink"></span>';
    }, 2500); 
  }

  function powerOff() {
    isPower = false;
    
    // Pastikan tombol power visualnya OFF (Merah/Pulse)
    pwrBtn.classList.remove('active');

    clearTimeout(bootTimer);
    wall.classList.remove('on');
    bootScreen.classList.remove('active');
    led.classList.remove('on');
    kbFrame.classList.remove('rgb-on');
    textArea.innerHTML = "";
    if(isAuto) stopAuto();
  }

  // AUTO DEMO
  function startAuto() {
    if(isAuto) return;
    isAuto = true;
    btnPlay.style.display = 'none';
    btnStop.style.display = 'block';
    typeIndex = 0;
    
    if(!isPower) {
        powerOn(); // Otomatis nyalakan jika mati
        setTimeout(() => { if(isAuto) runTypingAnimation(); }, 3500);
    } else {
        textArea.textContent = ""; 
        textArea.innerHTML = '<span class="cursor-blink"></span>';
        setTimeout(() => { if(isAuto) runTypingAnimation(); }, 500);
    }
  }

  function runTypingAnimation() {
    typeInterval = setInterval(() => {
        if(typeIndex >= demoText.length) {
            clearInterval(typeInterval);
            setTimeout(() => {
                if(isAuto) {
                    typeIndex = 0;
                    textArea.innerHTML = '<span class="cursor-blink"></span>';
                    runTypingAnimation();
                }
            }, 3000);
            return;
        }
        const char = demoText[typeIndex].toLowerCase();
        let keyMap = char;
        if(char === ' ') keyMap = ' ';
        if(char === '.') keyMap = '.';
        if(char === '?') keyMap = '/';
        if(char === ',') keyMap = ',';
        
        const keyEl = document.querySelector(`.key[data-key="${keyMap}"]`);
        if(keyEl) {
            keyEl.classList.add('pressed');
            playClack();
            setTimeout(() => keyEl.classList.remove('pressed'), 120);
        }
        let currentContent = textArea.textContent;
        textArea.textContent = currentContent + demoText[typeIndex];
        textArea.innerHTML += '<span class="cursor-blink"></span>';
        textArea.scrollTop = textArea.scrollHeight;
        typeIndex++;
    }, 120); 
  }

  function stopAuto() {
    isAuto = false;
    btnPlay.style.display = 'block';
    btnStop.style.display = 'none';
    clearInterval(typeInterval);
    typeIndex = 0;
    keys.forEach(k => k.classList.remove('pressed'));
  }
</script>

</body>
</html>